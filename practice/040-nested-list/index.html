<!-- <style>
  [hidden] {
    display: none !important;
  }
  body {
    font-size: 30px;
  }
  li {
    cursor: pointer;
    user-select: none;
  }
  ul {
    display: block;
  }
  /*li:hover {*/
  /*font-weight: bold;*/
  /*}*/
  /*ul {*/
  /*font-weight: normal;*/
  /*}*/
</style>

<ul>
  <li>Item1
    <ul>
      <li>Item1-1
        <ul>
          <li>Item1-1-1</li>
          <li>Item1-1-2</li>
          <li>Item1-1-3</li>
        </ul>
      </li>
      <li>Item1-2
        <ul>
          <li>Item1-2-1</li>
          <li>Item1-2-2</li>
          <li>Item1-2-3</li>
        </ul>
      </li>
      <li>Item1-3
        <ul>
          <li>Item1-3-1</li>
          <li>Item1-3-2</li>
          <li>Item1-3-3</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Item2
    <ul>
      <li>Item2-1</li>
      <li>Item2-2</li>
      <li>Item2-3</li>
    </ul>
  </li>
  <li>Item3
    <ul>
      <li>Item3-1</li>
      <li>Item3-2</li>
      <li>Item3-3</li>
    </ul>
  </li>
</ul>

<script>
  /*选中所有的li元素*/
  var li_all = document.querySelectorAll('li');
  /*迭代所有的li元素*/
  for (var i = 0; i < li_all.length; i++) {
    var li = li_all[i];
    /*让每一个li监听点击事件*/
    li.addEventListener('click', function (e) {
      /*当前li被点击的时候选中它下方的ul*/
      var list = this.querySelector('ul');
      /*如果当前li下没有子列表或者当前li不是点击源就直接返回*/
      if (!list || e.target !== this)
        return;
      /*倒置可见性*/
      list.hidden = !list.hidden;
    });
  } 
</script> -->


<!-- =====看视频重新写==== -->
<style>
/* [hidden]{
  display: none !important;
} */
  body {
    font-size: 30px; 
  }
  li  {
    cursor: pointer;
    user-select: none;
  }
  /* ul {
    display: block;
  } */
  /* li:hover {
    font-weight: bold;
  }
  ul{
    font-weight: normal;
  } */
</style>

<ul>
  <li>item1
    <ul>
      <!-- <li id="item">item1-1 -->
      <li>item1-1
        <ul>
          <li>Item1-1-1</li>
          <li>Item1-1-2</li>
          <li>Item1-1-3</li>          
        </ul>
      </li>
      <li>item1-2
         <ul>
          <li>Item1-2-1</li>
          <li>Item1-2-2</li>
          <li>Item1-2-3</li>          
        </ul>
      </li>
      <li>item1-3
         <ul>
          <li>Item1-3-1</li>
          <li>Item1-3-2</li>
          <li>Item1-3-3</li>          
        </ul>
      </li>      
    </ul>
  </li>
   <li>item2
    <ul>
      <li>item2-1</li>
      <li>item2-2</li>
      <li>item2-3</li>      
    </ul>
  </li>
   <li>item3
    <ul>
      <li>item3-1</li>
      <li>item3-2</li>
      <li>item3-3</li>      
    </ul>
  </li>
</ul>
<!-- <script>
  var item = document.querySelector('#item');
  var list = item.querySelector('ul');
  item.addEventListener('click',function(){
    list.hidden = !list.hidden;
  });
</script> -->
<script>
  // 选中所有的li元素
  var li_all = document.querySelectorAll('li');
  // console.log(li_all);
  // 迭代所有的li元素
  for (var i = 0; i < li_all.length; i++){
    var li = li_all[i];
  // 让每一个li监听点击事件
    li.addEventListener('click',function(e){
      // console.log(this === e.currentTarget);
      // e.stopPropagation();
      // if(e.target !== e.currentTarget)
      // return;
      // 当当前li被点击的时候选中它下方的ul
      var list = e.currentTarget.querySelector('ul');
      // 如果当前li下没有子列表，或者当前li不是点击源就直接返回
      if (e.target !== e.currentTarget || !list)
        return;
        // 倒置可见性
      list.hidden = !list.hidden;
    });
  }
</script>
